<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <!-- Unique identifier of the plugin. It should be FQN. It cannot be changed between the plugin versions. -->
    <id>cn.suso.AICodeTransformer</id>

    <!-- Public plugin name should be written in Title Case.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-name -->
    <name>AICodeTransformer</name>

    <!-- A displayed Vendor name or Organization ID displayed on the Plugins Page. -->
    <vendor email="support@suso.cn" url="https://github.com/suso">Suso</vendor>

    <!-- Description of the plugin displayed on the Plugin Page and IDE Plugin Manager.
         Simple HTML elements (text formatting, paragraphs, and lists) can be added inside of <![CDATA[ ]]> tag.
         Guidelines: https://plugins.jetbrains.com/docs/marketplace/plugin-overview-page.html#plugin-description -->
    <description><![CDATA[
    AI Code Transformer allows developers to trigger custom AI instructions with simple keyboard shortcuts to intelligently refactor, optimize, explain, or generate code.<br>
    <br>
    <strong>🌟 Recommended Model:</strong> For the ultimate coding experience, we highly recommend using <strong>LongCat-Flash-Thinking</strong> <br>
    <br>
    <strong>Key Features:</strong>
    <ul>
        <li>Configure multiple AI models (OpenAI, Claude, local models, <strong>LongCat-Flash-Thinking</strong>)</li>
        <li>Create custom prompt templates with variables</li>
        <li>Bind keyboard shortcuts to AI actions</li>
        <li>One-click code transformation and optimization</li>
    </ul>
    <br>
    <hr>
    <br>
    AI代码转换器让开发者能够通过简单的键盘快捷键触发自定义AI指令，智能地重构、优化、解释或生成代码。<br>
    <br>
    <strong>🌟 推荐模型：</strong>为了获得极致的编码体验，我们强烈推荐使用 <strong>LongCat-Flash-Thinking</strong> <br>
    <br>
    <strong>主要功能：</strong>
    <ul>
        <li>配置多种AI模型（OpenAI、Claude、本地模型、<strong>LongCat-Flash-Thinking</strong>）</li>
        <li>创建带变量的自定义提示模板</li>
        <li>绑定键盘快捷键到AI操作</li>
        <li>一键代码转换和优化</li>
    </ul>
  ]]></description>

    <!-- Product and plugin compatibility requirements.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-compatibility.html -->
    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.java</depends>
    <depends>com.intellij.modules.vcs</depends>
    <depends>Git4Idea</depends>
    
    <!-- Dynamic plugin support - allows installation/uninstallation without IDE restart -->
    <!-- Note: Some complex dependencies may still require restart -->
    <idea-version since-build="203.0" until-build="999.*"/>

    <!-- Extension points defined by the plugin.
         Read more: https://plugins.jetbrains.com/docs/intellij/plugin-extension-points.html -->
    <extensions defaultExtensionNs="com.intellij">
        <!-- Application-level services -->
        <applicationService serviceInterface="cn.suso.aicodetransformer.service.ConfigurationService"
                           serviceImplementation="cn.suso.aicodetransformer.service.impl.ConfigurationServiceImpl"/>
        <applicationService serviceInterface="cn.suso.aicodetransformer.service.PromptTemplateService"
                           serviceImplementation="cn.suso.aicodetransformer.service.impl.PromptTemplateServiceImpl"/>
        <applicationService serviceInterface="cn.suso.aicodetransformer.service.AIModelService"
                           serviceImplementation="cn.suso.aicodetransformer.service.impl.AIModelServiceImpl"/>
        <applicationService serviceInterface="cn.suso.aicodetransformer.service.ActionService"
                           serviceImplementation="cn.suso.aicodetransformer.service.impl.ActionServiceImpl"/>
        <applicationService serviceInterface="cn.suso.aicodetransformer.service.ExecutionService"
                           serviceImplementation="cn.suso.aicodetransformer.service.impl.ExecutionServiceImpl"/>
        <applicationService serviceInterface="cn.suso.aicodetransformer.service.CodeReplacementService"
                           serviceImplementation="cn.suso.aicodetransformer.service.impl.CodeReplacementServiceImpl"/>
        <applicationService serviceInterface="cn.suso.aicodetransformer.service.StatusService"
                           serviceImplementation="cn.suso.aicodetransformer.service.impl.StatusServiceImpl"/>
        <applicationService serviceInterface="cn.suso.aicodetransformer.service.ShortcutRecoveryService"
                           serviceImplementation="cn.suso.aicodetransformer.service.impl.ShortcutRecoveryServiceImpl"/>
        <applicationService serviceInterface="cn.suso.aicodetransformer.service.ErrorHandlingService"
                           serviceImplementation="cn.suso.aicodetransformer.service.impl.ErrorHandlingServiceImpl"/>
        <applicationService serviceInterface="cn.suso.aicodetransformer.service.CacheService"
                           serviceImplementation="cn.suso.aicodetransformer.service.impl.CacheServiceImpl"/>
        <applicationService serviceInterface="cn.suso.aicodetransformer.service.RateLimitService"
                           serviceImplementation="cn.suso.aicodetransformer.service.impl.RateLimitServiceImpl"/>
        <applicationService serviceInterface="cn.suso.aicodetransformer.service.PerformanceMonitorService"
                           serviceImplementation="cn.suso.aicodetransformer.service.impl.PerformanceMonitorServiceImpl"/>
        <applicationService serviceInterface="cn.suso.aicodetransformer.service.LoggingService"
                           serviceImplementation="cn.suso.aicodetransformer.service.impl.LoggingServiceImpl"/>
        <applicationService serviceInterface="cn.suso.aicodetransformer.service.AutoUpdateService"
                           serviceImplementation="cn.suso.aicodetransformer.service.impl.AutoUpdateServiceImpl"/>
        
        <!-- Project-level services -->
        <projectService serviceInterface="cn.suso.aicodetransformer.service.VCSService"
                       serviceImplementation="cn.suso.aicodetransformer.service.impl.VCSServiceImpl"/>
        
        <!-- Project startup activity -->
        <postStartupActivity implementation="cn.suso.aicodetransformer.AICodeTransformerProjectActivity"/>
        
        <!-- Settings page -->
        <applicationConfigurable parentId="tools" instance="cn.suso.aicodetransformer.ui.settings.AICodeTransformerConfigurable"
                                id="cn.suso.aicodetransformer.ui.settings.AICodeTransformerConfigurable"
                                displayName="AI Code Transformer"/>
        
        <!-- Notification groups -->
        <notificationGroup id="AICodeTransformer" displayType="BALLOON" key="notification.group.aicodetransformer"/>
        <notificationGroup id="AICodeTransformer.Shortcuts" displayType="BALLOON" key="notification.group.shortcuts"/>
    </extensions>
    
    <!-- Actions -->
    <actions>

        <!-- Git提交对话框中的AI生成按钮 -->
        <action id="AICodeTransformer.CommitDialogAI" 
                class="cn.suso.aicodetransformer.action.CommitDialogAIAction"
                text="🤖 AI生成" 
                description="使用AI自动生成commit信息并填充到提交框">
            <add-to-group group-id="Vcs.MessageActionGroup" anchor="last"/>
        </action>
        
        <!-- 动态模板菜单组 - 显示所有可用的prompt模板 -->
        <group id="AICodeTransformer.DynamicTemplates" 
               class="cn.suso.aicodetransformer.action.DynamicTemplateActionGroup"
               text="AI代码转换" 
               description="使用AI转换选中的代码" 
               popup="true">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
        </group>
    </actions>
</idea-plugin>